/*!
 * Filterable jQuery plugin v1.1.0
 * https://github.com/rogierborst/jQuery-Filterable
 *
 * Copyright 2015 Rogier Borst
 * Released under the MIT license
 */
!function(a){"use strict";var t="filterable",i={tickCheckboxesAtStart:!1,clearSearchBoxAtStart:!1,caseSensitiveFilter:!1,caseSensitiveSearch:!1,oddRowClass:"",evenRowClass:"",emptyTableMessage:"",emptyTableMessageClass:"empty-table-message",arrayData:{}};function s(e,t){var s=this;s.config=a.extend({},i,t),s.$table=e,s.activeFilters=[],s.activeSearchTerm="",s.numberOfColumns=0,s.init()}s.prototype={init:function(){var e=this;e.$controls=a(e.$table.data("filter-controls")),e.$searchBox=a(e.$table.data("search-controls")),e.numberOfColumns=a("thead th",e.$table).length,e.config.tickCheckboxesAtStart?a("input:checkbox",e.$controls).prop("checked",!0):a("input:checkbox:not(:checked)",e.$controls).each(function(){e._onCheckboxChange(this)}),e.config.clearSearchBoxAtStart?e.$searchBox.val(""):e.$searchBox.val()&&e.updateSearchTerm(e.$searchBox.val()),e.config.emptyTableMessage&&e._setupEmptyTableMessage(),e.$controls.on("change","input[type=checkbox]",function(){e._onCheckboxChange(this)}),e.$searchBox.on("keyup",function(){e.updateSearchTerm(a(this).val())})},setRowClasses:function(){a("tbody tr",this.$table).removeClass(this.config.oddRowClass+" "+this.config.evenRowClass),this.config.oddRowClass&&a("tbody tr:visible:even",this.$table).addClass(this.config.oddRowClass),this.config.evenRowClass&&a("tbody tr:visible:odd",this.$table).addClass(this.config.evenRowClass)},checkRows:function(){var e=this,t=e.config.emptyTableMessageClass;a("tbody tr",e.$table).each(function(){a(this).hasClass(t)||(e._rowIsFiltered(this)||!e._rowContainsSearchItem(this)?a(this).hide():a(this).show())}),e.config.emptyTableMessage&&e.checkIfTableIsEmpty(),(e.config.oddRowClass||e.config.evenRowClass)&&e.setRowClasses()},_rowIsFiltered:function(e){for(var t in this.activeFilters)if(!0===this._checkFilter(this.activeFilters[t],e))return!0;return!1},_checkFilter:function(e,t){t="cell"===e.scope?a(t).find("td").eq(e.name).text():a(t).attr("data-"+e.name),t=this.config.caseSensitiveFilter?a.trim(t):a.trim(t).toUpperCase();return"simple"===e.type?this._checkSimpleFilter(e,t):"array"===e.type?this._checkArrayFilter(e,t):void 0},_checkSimpleFilter:function(e,t){return-1<a.inArray(t,e.terms)},_checkArrayFilter:function(e,t){var s,i=t.split(e.separator);if(!e.exclusive&&i.length>e.terms.length)return!1;for(s in i)if(-1<a.inArray(i[s],e.terms)){if(e.exclusive)return!0}else if(!e.exclusive)return!1;return!e.exclusive},_rowContainsSearchItem:function(e){return""===this.activeSearchTerm||(this.config.caseSensitiveSearch?0<a("td:contains("+this.activeSearchTerm+")",e).length:0<a("td:containsNC("+this.activeSearchTerm+")",e).length)},_onCheckboxChange:function(e){var t=a(e),s=a(e).is(":checked")?"off":"on",e=void 0!==t.data("filter-content")?t.data("filter-content"):t.val();e=this.config.caseSensitiveFilter?e:e.toUpperCase(),t=t.data("filterColumn")||t.data("filterRowData"),this.updateFilters(t,e,s),this.checkRows()},updateFilters:function(e,t,s){for(var i={},a=-1,r=0;r<this.activeFilters.length;r++)if(this.activeFilters[r].name===e){i=this.activeFilters[r],a=r;break}a<0&&(i.type=void 0!==this.config.arrayData[e]?"array":"simple",i.scope="number"==typeof e?"cell":"row",i.name=e,i.terms=[],"array"===i.type&&(i.exclusive=this.config.arrayData[e].exclusive||!1,i.separator=this.config.arrayData[e].separator||", ")),(i=this._updateFilterTerms(i,t,s)).terms.length<1?this.activeFilters.splice(a,1):-1<a?this.activeFilters[a]=i:this.activeFilters.push(i)},_updateFilterTerms:function(e,t,s){if("on"===s)e.terms.push(t);else for(var i=e.terms.length-1;0<=i;i--)e.terms[i]===t&&e.terms.splice(i,1);return e},updateSearchTerm:function(e){this.activeSearchTerm=this.config.caseSensitiveSearch?e:e.toUpperCase(),this.checkRows()},_setupEmptyTableMessage:function(){var e=a("<tr></tr>").addClass(this.config.emptyTableMessageClass);a("<td></td>").attr("colspan",this.numberOfColumns).html(this.config.emptyTableMessage).appendTo(e),e.hide().prependTo("tbody",this.$table)},checkIfTableIsEmpty:function(){var e=this.config.emptyTableMessageClass,t=a("tbody tr:visible",self.$table);return t.length?t.length===a("."+e).length||void a("."+e).hide():(a("."+e).show(),!0)}},a.fn.filterable=function(e){if(void 0===e||"object"==typeof e)return this.each(function(){a.data(this,"plugin_"+t)||a.data(this,"plugin_"+t,new s(a(this),e))})},a.extend(a.expr[":"],{containsNC:function(e,t,s,i){return 0<=(e.textContent||e.innerText||"").toLowerCase().indexOf((s[3]||"").toLowerCase())}})}(jQuery,(window,document));
//# sourceMappingURL=filterable.min.js.map